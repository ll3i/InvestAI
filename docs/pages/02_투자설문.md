# Pixie 투자 설문 (Survey)

## 개요
투자 설문 페이지는 사용자의 투자 성향을 과학적으로 분석하여 개인화된 투자 전략을 수립하는 핵심 기능입니다. 10개의 정교하게 설계된 질문을 통해 사용자의 투자 프로필을 생성합니다.

## 페이지 구조

### 1. 설문 시작 화면 (`/survey`)
```html
제목: "당신의 투자 성향을 알아보세요"
부제: "10가지 질문으로 맞춤형 투자 전략을 제안해드립니다"
예상 소요 시간: 약 3-5분
시작 버튼: "설문 시작하기"
```

### 2. 진행 상태 표시
- **프로그레스 바**: 현재 진행 상황 시각화 (1/10 ~ 10/10)
- **단계 표시**: "질문 N / 10"
- **이전/다음 버튼**: 질문 간 이동
- **임시 저장**: 진행 중인 답변 자동 저장

## 10가지 핵심 질문

### 질문 1: 투자 경험
**"귀하의 투자 경험은 어느 정도입니까?"**
- 1년 미만 (초보자)
- 1-3년 (초급)
- 3-5년 (중급)
- 5-10년 (고급)
- 10년 이상 (전문가)

### 질문 2: 투자 목표
**"주요 투자 목표는 무엇입니까?"**
- 단기 수익 실현 (1년 이내)
- 중기 자산 증식 (1-5년)
- 장기 자산 형성 (5-10년)
- 은퇴 준비 (10년 이상)
- 안정적인 수익 창출 (배당/이자)

### 질문 3: 위험 감수 성향
**"투자원금의 손실 가능성에 대해 어떻게 생각하십니까?"**
- 원금 손실 절대 불가
- 최소한의 손실만 감수 (-5% 이내)
- 적정 수준 손실 감수 가능 (-10% 이내)
- 높은 수익을 위해 손실 감수 (-20% 이내)
- 공격적 투자, 큰 손실도 감수 (-20% 이상)

### 질문 4: 투자 기간
**"예상 투자 기간은 얼마나 되십니까?"**
- 6개월 미만
- 6개월-1년
- 1-3년
- 3-5년
- 5년 이상

### 질문 5: 투자 가능 금액
**"총 투자 가능 금액은 얼마입니까?"**
- 1천만원 미만
- 1천만원-3천만원
- 3천만원-5천만원
- 5천만원-1억원
- 1억원 이상

### 질문 6: 수익률 기대치
**"연간 목표 수익률은 얼마입니까?"**
- 은행 금리 수준 (3-4%)
- 시장 평균 수익률 (6-8%)
- 시장 평균 이상 (10-15%)
- 고수익 추구 (15-20%)
- 초고수익 추구 (20% 이상)

### 질문 7: 투자 지식 수준
**"금융 투자 지식 수준을 평가해주세요"**
- 매우 낮음 (기초 용어도 어려움)
- 낮음 (기본 개념 이해)
- 보통 (재무제표 기본 이해)
- 높음 (기술적 분석 가능)
- 매우 높음 (전문가 수준)

### 질문 8: 선호 투자 상품
**"선호하는 투자 상품은 무엇입니까?" (복수 선택)**
- [ ] 국내 주식
- [ ] 해외 주식
- [ ] 채권
- [ ] 펀드
- [ ] ETF
- [ ] 부동산 리츠
- [ ] 원자재
- [ ] 암호화폐

### 질문 9: 투자 스타일
**"선호하는 투자 스타일은 무엇입니까?"**
- 가치투자 (저평가 종목 장기 보유)
- 성장투자 (고성장 기업 투자)
- 배당투자 (안정적 배당 수익)
- 모멘텀 투자 (추세 추종)
- 인덱스 투자 (시장 평균 추구)

### 질문 10: 리스크 관리
**"포트폴리오가 -20% 손실을 보았을 때 어떻게 하시겠습니까?"**
- 즉시 전량 매도
- 일부 매도하여 손실 제한
- 현 상태 유지
- 추가 매수 (평균 단가 낮추기)
- 대규모 추가 매수

## 투자 성향 분석 알고리즘

### 점수 계산 시스템
```python
class InvestmentProfileAnalyzer:
    def calculate_risk_score(self, answers):
        """위험 감수 점수 계산 (0-100)"""
        risk_weights = {
            'q3': 0.25,  # 손실 감수도
            'q6': 0.20,  # 수익률 기대치
            'q9': 0.20,  # 투자 스타일
            'q10': 0.35  # 손실 시 대응
        }
        return weighted_sum(answers, risk_weights)
    
    def determine_investor_type(self, risk_score):
        """투자자 유형 분류"""
        if risk_score < 20:
            return "안정형"
        elif risk_score < 40:
            return "안정추구형"
        elif risk_score < 60:
            return "위험중립형"
        elif risk_score < 80:
            return "적극투자형"
        else:
            return "공격투자형"
```

### 투자자 유형별 특징

#### 1. 안정형 (Risk Score: 0-20)
- **특징**: 원금 보전 최우선
- **추천 포트폴리오**: 채권 70%, 주식 20%, 현금 10%
- **추천 종목**: 대형 우량주, 국공채, 예금

#### 2. 안정추구형 (Risk Score: 20-40)
- **특징**: 안정적 수익 추구
- **추천 포트폴리오**: 채권 50%, 주식 35%, 대체투자 15%
- **추천 종목**: 배당주, 회사채, 리츠

#### 3. 위험중립형 (Risk Score: 40-60)
- **특징**: 균형잡힌 투자
- **추천 포트폴리오**: 주식 50%, 채권 30%, 대체투자 20%
- **추천 종목**: 블루칩, 성장주, 섹터 ETF

#### 4. 적극투자형 (Risk Score: 60-80)
- **특징**: 고수익 추구
- **추천 포트폴리오**: 주식 70%, 대체투자 20%, 채권 10%
- **추천 종목**: 성장주, 중소형주, 해외주식

#### 5. 공격투자형 (Risk Score: 80-100)
- **특징**: 초고수익 추구
- **추천 포트폴리오**: 주식 85%, 대체투자 15%
- **추천 종목**: 테마주, 신흥시장, 레버리지 ETF

## 결과 페이지

### 분석 결과 표시
```
당신의 투자 성향: [위험중립형]

위험 감수도: ████████░░ 65/100
투자 지식: ███████░░░ 45/100
투자 경험: █████░░░░░ 30/100

맞춤형 포트폴리오:
- 국내 주식: 45%
- 해외 주식: 15%
- 채권: 25%
- 대체투자: 15%
```

### 상세 리포트 제공
1. **투자 성향 요약**: 주요 특징 3-5가지
2. **강점과 약점**: 투자자로서의 장단점
3. **추천 전략**: 구체적인 투자 전략 3가지
4. **주의사항**: 피해야 할 투자 행동
5. **학습 추천**: 보완이 필요한 영역

## 데이터 저장 및 활용

### 데이터베이스 스키마
```sql
CREATE TABLE user_profiles (
    id SERIAL PRIMARY KEY,
    session_id VARCHAR(50) UNIQUE,
    answers JSONB,
    risk_score INTEGER,
    investor_type VARCHAR(20),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### API 엔드포인트
```python
@app.route('/api/survey/submit', methods=['POST'])
def submit_survey():
    answers = request.json['answers']
    session_id = request.headers.get('X-Session-ID')
    
    # 프로필 분석
    analyzer = UserProfileAnalyzer()
    profile = analyzer.analyze(answers)
    
    # 결과 저장
    save_user_profile(session_id, profile)
    
    return jsonify({
        'investor_type': profile['type'],
        'risk_score': profile['risk_score'],
        'recommendations': profile['recommendations']
    })
```

## 사용자 경험 개선

### 진행 중 이탈 방지
- 자동 저장 기능
- 이탈 시 재진입 안내
- 진행률 표시로 동기 부여

### 응답 검증
- 일관성 검사 (모순된 답변 확인)
- 극단적 응답 경고
- 재확인 질문 제공

### 결과 활용
- AI 챗봇과 연동하여 맞춤형 조언
- 포트폴리오 자동 생성
- 정기적 재평가 권장 (6개월마다)