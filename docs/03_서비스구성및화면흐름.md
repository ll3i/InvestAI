# 03. 서비스 구성 및 화면 흐름

## 3.1 서비스 아키텍처

### 3.1.1 시스템 아키텍처 개요

Pixie 서비스는 마이크로서비스 아키텍처를 기반으로 설계되어 높은 확장성과 유지보수성을 제공합니다. 각 서비스는 독립적으로 배포 및 확장이 가능하며, API Gateway를 통해 통합된 인터페이스를 제공합니다.

**주요 구성 요소**

1. **프론트엔드 레이어**
   - React 기반 SPA (Single Page Application)
   - Bootstrap 5를 활용한 반응형 디자인
   - Chart.js를 통한 데이터 시각화
   - WebSocket을 활용한 실시간 통신

2. **API Gateway**
   - 클라이언트 요청의 단일 진입점
   - 인증/인가 처리
   - Rate Limiting 및 트래픽 관리
   - 요청 라우팅 및 로드 밸런싱

3. **비즈니스 로직 레이어**
   - Flask 기반 RESTful API 서버
   - 멀티 에이전트 AI 시스템
   - 포트폴리오 관리 엔진
   - 실시간 데이터 처리 파이프라인

4. **데이터 레이어**
   - SQLite/PostgreSQL 관계형 데이터베이스
   - Supabase 실시간 데이터베이스
   - Redis 캐싱 시스템
   - 파일 기반 데이터 저장소 (CSV, Pickle)

5. **외부 서비스 연동**
   - OpenAI/Claude API (LLM 서비스)
   - 금융 데이터 API (한국거래소, Yahoo Finance)
   - 뉴스 RSS 피드
   - 알림 서비스 (이메일, 푸시)

### 3.1.2 데이터 플로우

**실시간 데이터 수집 및 처리 흐름**

1. **데이터 수집 단계**
   - 스케줄러가 정해진 시간에 데이터 수집 작업 트리거
   - 각 데이터 소스별 수집기가 병렬로 동작
   - 수집된 데이터는 임시 버퍼에 저장

2. **데이터 처리 단계**
   - 데이터 검증 및 정제 (이상치 제거, 정규화)
   - 특징 추출 및 지표 계산
   - 데이터베이스 저장 및 캐시 업데이트

3. **분석 및 예측 단계**
   - AI 모델을 통한 패턴 분석
   - 시장 예측 및 리스크 평가
   - 투자 시그널 생성

4. **서비스 제공 단계**
   - API를 통한 데이터 제공
   - 실시간 알림 발송
   - 대시보드 업데이트

## 3.2 주요 화면 구성

### 3.2.1 메인 대시보드

**화면 구성 요소**

메인 대시보드는 사용자가 로그인 후 처음 접하는 화면으로, 투자 현황을 한눈에 파악할 수 있도록 설계되었습니다.

**상단 영역 (Header)**
- 로고 및 서비스명
- 주요 지수 실시간 표시 (KOSPI, KOSDAQ)
- 글로벌 검색 바

**중앙 영역 (Main Content)**

1. **포트폴리오 요약 카드**
   - 총 자산 가치 및 일일 변동률
   - 수익률 차트 (1일, 1주, 1개월, 3개월, 1년)
   - 자산 배분 도넛 차트
   - 상위 수익/손실 종목 리스트

2. **AI 인사이트 패널**
   - 오늘의 AI 분석 요약
   - 주요 투자 기회 알림
   - 리스크 경고 메시지
   - 추천 액션 아이템

3. **시장 동향 위젯**
   - 실시간 뉴스 피드
   - 섹터별 히트맵
   - 거래량 상위 종목
   - 투자자별 매매 동향

4. **빠른 실행 버튼**
   - AI 상담 시작
   - 포트폴리오 분석
   - 종목 검색
   - 매수/매도 주문

**하단 영역 (Footer)**
- 서비스 이용약관 및 개인정보처리방침
- 고객센터 연락처
- 소셜 미디어 링크

### 3.2.2 AI 투자 상담 화면

**채팅 인터페이스 설계**

AI 투자 상담 화면은 사용자와 AI 간의 자연스러운 대화를 지원하는 인터페이스입니다.

**채팅 영역**
- 대화 내역 표시 영역 (스크롤 가능)
- AI 응답과 사용자 메시지 구분 (좌/우 정렬, 색상 구분)
- 타임스탬프 표시
- AI 에이전트 식별 표시 (AI-A, AI-B 등)

**입력 영역**
- 텍스트 입력 필드 (멀티라인 지원)
- 음성 입력 버튼
- 파일 첨부 버튼 (포트폴리오 엑셀 등)
- 전송 버튼

**사이드 패널**
- 대화 히스토리 리스트
- 자주 묻는 질문 템플릿
- 현재 분석 중인 데이터 표시
- 관련 차트 및 그래프

**기능 버튼**
- 새 대화 시작
- 대화 내용 저장/내보내기
- 추천 종목 즉시 거래
- 상담 내용 공유

### 3.2.3 포트폴리오 관리 화면

**포트폴리오 상세 분석**

포트폴리오 관리 화면은 보유 자산의 상세한 분석과 관리 기능을 제공합니다.

**보유 종목 테이블**
- 종목명, 티커, 보유 수량, 평균 매입가
- 현재가, 평가금액, 수익률, 수익금
- 일일 변동률 및 52주 최고/최저
- 정렬 및 필터링 기능

**포트폴리오 분석 차트**
- 시간대별 수익률 추이 (라인 차트)
- 섹터별 분산도 (파이 차트)
- 리스크-수익률 산점도
- 상관관계 히트맵

**리밸런싱 도구**
- 현재 vs 목표 비중 비교
- AI 추천 리밸런싱 전략
- 시뮬레이션 기능
- 실행 계획 수립

**성과 분석**
- 벤치마크 대비 성과
- 샤프 비율, 소르티노 비율
- 최대 낙폭 (MDD)
- 월별/연도별 수익률

### 3.2.4 투자 성향 분석 화면

**10-Question 서베이 인터페이스**

투자 성향 분석은 사용자의 투자 프로필을 정확히 파악하기 위한 핵심 기능입니다.

**진행 상태 표시**
- 프로그레스 바 (1/10 ~ 10/10)
- 예상 소요 시간 표시
- 이전/다음 네비게이션 버튼

**질문 표시 영역**
- 명확한 질문 텍스트
- 보조 설명 및 예시
- 도움말 툴팁

**답변 선택 인터페이스**
- 라디오 버튼 (단일 선택)
- 슬라이더 (범위 선택)
- 체크박스 (복수 선택)
- 자유 텍스트 입력

**결과 화면**
- 투자 성향 유형 (보수적/중립적/공격적)
- 상세 점수 분석 (각 항목별 점수)
- 맞춤형 투자 전략 제안
- 추천 포트폴리오 구성

## 3.3 사용자 플로우

### 3.3.1 신규 사용자 온보딩 플로우

**Step 1: 회원가입**
1. 이메일/소셜 로그인 선택
2. 기본 정보 입력 (이름, 연령대)
3. 서비스 이용약관 동의
4. 이메일 인증

**Step 2: 투자 프로필 설정**
1. 10-Question 서베이 진행
2. 투자 경험 레벨 선택
3. 투자 목표 설정
4. 초기 자산 규모 입력

**Step 3: 첫 포트폴리오 구성**
1. AI 추천 포트폴리오 검토
2. 관심 종목 추가/제거
3. 투자 금액 배분
4. 시뮬레이션 실행

**Step 4: 서비스 활성화**
1. 대시보드 커스터마이징
2. 알림 설정
3. 증권사 계좌 연동 (선택)
4. 첫 AI 상담 시작

### 3.3.2 기존 사용자 일일 사용 플로우

**Morning Routine (오전 8-9시)**
1. 푸시 알림으로 장 시작 전 브리핑 확인
2. 대시보드에서 해외 시장 마감 결과 확인
3. AI 모닝 브리핑 읽기
4. 오늘의 매매 계획 수립

**Trading Hours (오전 9시-오후 3시 30분)**
1. 실시간 포트폴리오 모니터링
2. 가격 알림 수신 및 대응
3. AI와 실시간 상담
4. 매매 실행 및 기록

**After Market (오후 3시 30분 이후)**
1. 일일 수익률 확인
2. AI 장 마감 분석 리포트 확인
3. 내일 전략 수립
4. 포트폴리오 리밸런싱 검토

### 3.3.3 AI 상담 플로우

**상담 시작**
1. 채팅 버튼 클릭 또는 음성 명령
2. 이전 대화 컨텍스트 로드
3. 사용자 프로필 및 포트폴리오 정보 동기화

**대화 진행**
1. 사용자 질문 입력
2. AI-A가 초기 분석 및 응답 생성
3. AI-A2가 추가 데이터 요구사항 파악
4. AI-B가 실시간 데이터 분석
5. 통합 AI가 최종 답변 생성

**상담 결과 활용**
1. 추천 내용 저장
2. 실행 계획 수립
3. 알림 설정
4. 포트폴리오에 반영

## 3.4 UI/UX 설계 원칙

### 3.4.1 디자인 시스템

**컬러 팔레트**
- Primary Color: #1E3A8A (신뢰감을 주는 네이비 블루)
- Secondary Color: #10B981 (긍정적인 그린)
- Accent Color: #F59E0B (주목도 높은 앰버)
- Error Color: #EF4444 (경고 레드)
- Background: #F9FAFB (밝은 그레이)
- Text: #1F2937 (다크 그레이)

**타이포그래피**
- 제목: Pretendard Bold (24-32px)
- 본문: Pretendard Regular (14-16px)
- 캡션: Pretendard Light (12px)
- 숫자: Roboto Mono (금융 데이터용)

**컴포넌트 라이브러리**
- 버튼: Primary, Secondary, Outline, Text
- 카드: 정보 카드, 액션 카드, 차트 카드
- 모달: 확인, 알림, 폼 입력
- 테이블: 정렬 가능, 필터링, 페이지네이션
- 차트: 라인, 바, 파이, 캔들스틱

### 3.4.2 반응형 디자인 전략

**브레이크포인트**
- Mobile: 320px - 767px
- Tablet: 768px - 1023px
- Desktop: 1024px - 1439px
- Large Desktop: 1440px+

**모바일 최적화**
- 터치 친화적 인터페이스 (최소 44px 터치 영역)
- 스와이프 제스처 지원
- 세로/가로 모드 자동 전환
- 하단 네비게이션 바

**태블릿 최적화**
- 2컬럼 레이아웃
- 플로팅 액션 버튼
- 분할 화면 지원

**데스크톱 최적화**
- 멀티 컬럼 레이아웃
- 고급 차트 기능
- 키보드 단축키 지원
- 멀티 모니터 지원

### 3.4.3 접근성 (Accessibility)

**WCAG 2.1 AA 준수**
- 색상 대비율 4.5:1 이상
- 키보드 네비게이션 완벽 지원
- 스크린 리더 호환성
- 포커스 인디케이터 명확 표시

**다국어 지원**
- 한국어 (기본)
- 영어
- 중국어 (간체/번체)
- 일본어

**접근성 기능**
- 폰트 크기 조절
- 고대비 모드
- 색맹 친화적 컬러 모드
- 애니메이션 감소 옵션

## 3.5 화면 전환 및 네비게이션

### 3.5.1 네비게이션 구조

**주요 메뉴 구조**
```
홈 (대시보드)
├── 포트폴리오
│   ├── 내 포트폴리오
│   ├── 수익률 분석
│   └── 리밸런싱
├── AI 상담
│   ├── 새 상담 시작
│   ├── 상담 내역
│   └── AI 인사이트
├── 시장 정보
│   ├── 실시간 시세
│   ├── 뉴스
│   └── 공시 정보
├── 투자 도구
│   ├── 종목 분석
│   ├── 포트폴리오 시뮬레이터
│   └── 세금 계산기
└── 내 정보
    ├── 프로필 관리
    ├── 투자 성향 재평가
    ├── 알림 설정
    └── 계정 설정
```

### 3.5.2 화면 전환 애니메이션

**페이지 전환**
- Fade In/Out: 기본 페이지 전환
- Slide: 탭 전환 및 모바일 네비게이션
- Modal: 팝업 및 상세 정보 표시
- Skeleton Loading: 데이터 로딩 시

**마이크로 인터랙션**
- 버튼 호버 효과
- 입력 필드 포커스 애니메이션
- 성공/실패 피드백 애니메이션
- 프로그레스 인디케이터

### 3.5.3 상태 관리 및 데이터 동기화

**클라이언트 상태 관리**
- Redux를 통한 전역 상태 관리
- 컴포넌트 로컬 상태
- 세션 스토리지 활용
- 브라우저 캐싱 전략

**서버 동기화**
- WebSocket을 통한 실시간 업데이트
- Polling을 통한 주기적 동기화
- Optimistic UI 업데이트
- 오프라인 지원 및 동기화

이러한 체계적인 서비스 구성과 화면 흐름을 통해 Pixie는 사용자에게 직관적이고 효율적인 투자 경험을 제공합니다. 각 화면과 기능은 사용자의 투자 여정을 완벽하게 지원하도록 설계되었으며, AI 기술과의 자연스러운 통합을 통해 전문가 수준의 투자 조언을 누구나 쉽게 받을 수 있도록 합니다.