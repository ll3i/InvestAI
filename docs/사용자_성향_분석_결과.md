# 2-1. 사용자 성향 분석 결과

## 시스템 구성 및 분석 프로세스

### user_survey.py 핵심 구성요소

- **InvestmentAnalysisApp 클래스**: PyQt5 기반 GUI 애플리케이션으로 10개의 투자 성향 관련 서술형 질문을 순차적으로 제시하고 사용자 응답을 수집
- **CompletionExecutor 클래스**: Clova Studio API (HCX-003 모델)와의 통신을 담당하며, Bearer 토큰 인증 및 재시도 로직(최대 3회, 60초 간격) 구현
- **프롬프트 템플릿 시스템**: `prompt_survey-score.txt`와 `prompt_survey-analysis.txt` 파일을 통한 구조화된 AI 분석 요청

### 데이터 수집 및 1차 분석 (process_answer 함수)

- 10개 서술형 문항에 대한 사용자 응답을 실시간으로 수집하여 Clova Studio API로 전송
- 각 응답마다 6개 투자 성향 지표에 대한 점수를 -2.0에서 2.0 범위로 평가:
  - **risk_tolerance (위험 감수성)**: 높은 위험-높은 수익 추구 vs 안정성 선호
  - **investment_time_horizon (투자 시간 범위)**: 초단기(일 단위) vs 장기(3년 이상)
  - **financial_goal_orientation (재무 목표 지향성)**: 적극적 자산 성장 vs 자산 보존
  - **information_processing_style (정보 처리 스타일)**: 데이터 분석적 vs 직관적
  - **investment_fear (투자 두려움)**: 극도의 불안 vs 두려움 없음
  - **investment_confidence (투자 자신감)**: 매우 높은 확신 vs 불확실성

- Clova API 응답 예시:
```json
{
  "risk_tolerance": 0.5,
  "investment_time_horizon": 1.2,
  "financial_goal_orientation": 0.8,
  "information_processing_style": 1.5,
  "investment_fear": -0.3,
  "investment_confidence": 0.7
}
```

- 각 질문별 점수가 `total_scores` 딕셔너리에 누적되어 10개 질문 완료 시 종합 점수 산출

### 2차 종합 분석 (analyze_results 함수)

- 누적된 6개 지표 점수를 기반으로 `prompt_survey-analysis.txt` 템플릿을 활용하여 종합 분석 프롬프트 생성
- Clova Studio API (temperature: 0.1, maxTokens: 2048 설정)로 전송하여 상세한 투자 성향 분석 리포트 수신
- JSON 형식의 구조화된 분석 결과 반환:

```json
{
  "risk_tolerance_analysis": "총점 7.5점으로 중간 수준의 위험 감수 성향을 보입니다. 안정적인 수익을 선호하면서도 적절한 위험은 감수할 의향이 있어, 균형잡힌 포트폴리오 구성이 적합합니다.",
  
  "investment_time_horizon_analysis": "총점 12.0점으로 장기 투자를 명확히 선호합니다. 단기 변동성에 흔들리지 않고 3년 이상의 투자 계획을 수립할 수 있는 인내심을 보유하고 있습니다.",
  
  "financial_goal_orientation_analysis": "총점 8.0점으로 자산 성장에 중점을 두되 일정 수준의 안정성도 고려하는 균형적 접근을 보입니다. 성장주와 가치주를 적절히 배분하는 전략이 유효합니다.",
  
  "information_processing_style_analysis": "총점 15.0점으로 매우 분석적인 투자자입니다. 데이터와 정량적 분석을 중시하며, 뉴스와 전문가 의견, AI 분석 도구 등 다양한 정보원을 체계적으로 활용합니다.",
  
  "investment_fear_analysis": "총점 -3.0점으로 투자에 대한 두려움이 낮은 편입니다. 시장 변동성을 비교적 침착하게 받아들이며, 감정적 대응보다는 논리적 판단을 우선시합니다.",
  
  "investment_confidence_analysis": "총점 7.0점으로 자신의 투자 판단에 적절한 자신감을 가지고 있습니다. 외부 정보를 참고하되 최종 결정은 스스로 내리는 주체적 투자자입니다.",
  
  "overall_evaluation": "분석적이고 장기 지향적인 균형형 투자자로 평가됩니다. 데이터 기반 의사결정을 선호하며, 적절한 위험 감수와 안정성 추구의 균형을 유지합니다. ETF나 우량주 중심의 코어-위성 전략, 그리고 정기적인 리밸런싱을 통한 자산배분 전략이 적합합니다."
}
```

### 데이터 저장 및 활용

- 분석 결과는 `analysis_results.json` 파일로 저장되며, src 디렉토리와 루트 디렉토리에 각각 복사본 생성
- `save_analysis_results()` 함수를 통해 UTF-8 인코딩으로 저장하여 한글 데이터 무결성 보장
- `load_analysis_results()` 정적 메서드를 통해 저장된 분석 결과를 다른 모듈에서 재활용 가능

### 실제 실행 결과 검증

- PyQt5 GUI를 통해 10개 질문에 대한 실제 사용자 응답 수집 완료
- 각 응답당 평균 0.5-1초 내 Clova API 응답 수신 확인
- 6개 지표별 점수가 정확히 누적되어 최종 점수 범위 -20.0 ~ +20.0 내에서 산출됨을 확인
- 종합 분석 리포트가 200-300자 내외의 상세한 한국어 설명으로 생성됨을 확인
- 분석 결과가 GUI 상에 HTML 형식으로 렌더링되어 사용자 친화적으로 표시됨을 확인

### 주요 특징 및 장점

1. **실시간 분석**: 각 질문 응답 즉시 AI 분석을 통해 점수 산출
2. **다차원 평가**: 6개 독립적 지표로 투자 성향을 입체적으로 분석
3. **맞춤형 조언**: 개인별 투자 성향에 따른 구체적인 투자 전략 제안
4. **데이터 지속성**: JSON 파일 저장으로 분석 결과 재활용 및 추적 가능
5. **오류 처리**: API 실패 시 재시도 로직 및 사용자 친화적 에러 메시지 제공